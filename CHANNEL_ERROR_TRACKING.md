# ูุธุงู ุชุชุจุน ุฃุฎุทุงุก ุงููููุงุช / Channel Error Tracking System

## ูุธุฑุฉ ุนุงูุฉ / Overview

ุชู ุฅุถุงูุฉ ูุธุงู ุดุงูู ูุชุชุจุน ูุชุดุฎูุต ุฃุฎุทุงุก ุฅุฑุณุงู ุงูุฑุณุงุฆู ูููููุงุช ูู ุงูุจูุช. ูุฐุง ุงููุธุงู ูุณุงุนุฏ ูู ููู ููุงุฐุง ูุง ูุชู ุฅุฑุณุงู ุงูุฑุณุงุฆู ูููููุงุช ุจุดูู ุฏููู.

## ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ / New Features

### 1. ุชุณุฌูู ุชูุตููู ูุฅุนุฏุงุฏุงุช ุงููููุงุช
ุนูุฏ ุจุฏุก ุงูุจูุชุ ุณูุชู ุนุฑุถ ุชูุฑูุฑ ุดุงูู ุนู ุญุงูุฉ ุฌููุน ุงููููุงุช:
```
๐ข CHANNEL MANAGER CONFIGURATION
======================================================================
โ Logs Channel: CONFIGURED
   โโ ID: -1001234567890
   โโ Purpose: Bot events and errors logging
----------------------------------------------------------------------
โ Videos Channel: NOT CONFIGURED
   โโ Env Variable: VIDEOS_CHANNEL_ID
   โโ Purpose: Downloaded videos backup
   โโ Action Required: Add VIDEOS_CHANNEL_ID to .env file
----------------------------------------------------------------------
๐ SUMMARY: 3/6 channels configured
```

### 2. ุงุฎุชุจุงุฑ ุชููุงุฆู ูููููุงุช ุนูุฏ ุงูุจุฏุก
ุงูุจูุช ุงูุขู ูุฎุชุจุฑ ุงูุงุชุตุงู ุจุฌููุน ุงููููุงุช ุงูููุนุฏุฉ ุนูุฏ ุงูุจุฏุก:
- ูุชุญูู ูู ูุฌูุฏ ุงูููุงุฉ
- ูุชุญูู ูู ุฃู ุงูุจูุช ุนุถู ูู ุงูููุงุฉ
- ูุชุญูู ูู ุตูุงุญูุงุช ุงูุจูุช (admin ุฃู ูุง)
- ูุชุญูู ูู ูุฏุฑุฉ ุงูุจูุช ุนูู ุงููุดุฑ

```
๐งช TESTING CHANNEL CONNECTIVITY
======================================================================
๐ Testing Logs channel (-1001234567890)...
   โ Logs: Connection successful
      โโ Channel Title: Bot Logs
      โโ Bot Status: administrator
      โโ Can Post: Yes
----------------------------------------------------------------------
๐ Testing Admin channel (-1009876543210)...
   โ Admin: Access forbidden
      โโ Issue: Bot not added to channel or blocked
----------------------------------------------------------------------
๐ TEST RESULTS: 2/3 channels accessible
```

### 3. ุชุชุจุน ููุตู ููู ุนูููุฉ ุฅุฑุณุงู
ุนูุฏ ูุญุงููุฉ ุฅุฑุณุงู ุฑุณุงูุฉ ูุฃู ููุงุฉุ ูุชู ุชุณุฌูู:

#### ุฃ. ูุนูููุงุช ูุญุงููุฉ ุงูุฅุฑุณุงู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ค ATTEMPTING TO SEND MESSAGE TO CHANNEL
๐ Channel Name: Logs
๐ Channel ID: -1001234567890
๐ Message Length: 345 characters
๐จ Parse Mode: Markdown
๐ Silent: False
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุจ. ูุฌุงุญ ุงูุฅุฑุณุงู:
```
โ SUCCESS: Message sent to Logs channel
๐จ Message ID: 12345
โฐ Sent at: 14:23:45
```

#### ุฌ. ูุดู ุงูุฅุฑุณุงู ูุน ุงูุชุดุฎูุต:
```
โ TELEGRAM ERROR: Failed to send to Admin channel
๐ Channel Name: Admin
๐ Channel ID: -1009876543210
๐ด Error Type: Forbidden
๐ Error Message: Forbidden: bot was blocked by the user

๐ก DIAGNOSIS: Bot doesn't have permission to send messages
โ SOLUTIONS:
   1. Add the bot as an administrator to the channel
   2. Grant 'Post Messages' permission to the bot
   3. If bot was removed, re-add it to the channel
   4. Verify bot token is correct and active
```

## ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ูุงูุญููู / Common Errors and Solutions

### 1. `chat not found` / ุงูููุงุฉ ุบูุฑ ููุฌูุฏุฉ
**ุงูุณุจุจ:**
- ูุนุฑู ุงูููุงุฉ ุบูุฑ ุตุญูุญ
- ุงูููุงุฉ ุชู ุญุฐููุง
- ุงูุจูุช ุชู ุญุฐูู ูู ุงูููุงุฉ

**ุงูุญู:**
1. ุชุญูู ูู ุฃู ูุนุฑู ุงูููุงุฉ ุตุญูุญ (ูุฌุจ ุฃู ูุจุฏุฃ ุจู `-100`)
2. ุชุฃูุฏ ูู ูุฌูุฏ ุงูููุงุฉ
3. ุฃุนุฏ ุฅุถุงูุฉ ุงูุจูุช ููููุงุฉ ุฅุฐุง ุชู ุญุฐูู

### 2. `forbidden` / ุงููุตูู ูุญุธูุฑ
**ุงูุณุจุจ:**
- ุงูุจูุช ููุณ ุนุถูุงู ูู ุงูููุงุฉ
- ุงูุจูุช ููุณ ุฃุฏูู ูู ุงูููุงุฉ
- ุงูุจูุช ูุง ูููู ุตูุงุญูุฉ ุงููุดุฑ

**ุงูุญู:**
1. ุฃุถู ุงูุจูุช ูุฃุฏูู ูู ุงูููุงุฉ
2. ุงููุญ ุงูุจูุช ุตูุงุญูุฉ "Post Messages"
3. ุชุฃูุฏ ูู ุฃู ุงูุจูุช ูู ูุชู ุญุธุฑู

### 3. `message is too long` / ุงูุฑุณุงูุฉ ุทูููุฉ ุฌุฏุงู
**ุงูุณุจุจ:**
- ุงูุฑุณุงูุฉ ุชุชุฌุงูุฒ 4096 ุญุฑู (ุญุฏ Telegram)

**ุงูุญู:**
1. ุงุฎุชุตุฑ ูุญุชูู ุงูุฑุณุงูุฉ
2. ูุณูู ุงูุฑุณุงูุฉ ุฅูู ุฃุฌุฒุงุก ูุชุนุฏุฏุฉ

### 4. `can't parse` / ุฎุทุฃ ูู ุงูุชูุณูู
**ุงูุณุจุจ:**
- ุฎุทุฃ ูู ุตูุบุฉ Markdown/HTML
- ุฃุญุฑู ุฎุงุตุฉ ุบูุฑ ูููุฑุจุฉ

**ุงูุญู:**
1. ุชุญูู ูู ุตุญุฉ ุตูุบุฉ Markdown
2. ุชุฃูุฏ ูู ุฅูุฑุงุจ ุงูุฃุญุฑู ุงูุฎุงุตุฉ
3. ุฌุฑุจ ุงูุฅุฑุณุงู ุจุฏูู parse_mode ููุงุฎุชุจุงุฑ

### 5. `timeout` / ุงูุชูุช ุงููููุฉ
**ุงูุณุจุจ:**
- ูุดููุฉ ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
- ูุดุงูู ูู ุฎูุงุฏู Telegram

**ุงูุญู:**
1. ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
2. ุฃุนุฏ ุงููุญุงููุฉ
3. ุชุญูู ูู ุญุงูุฉ Telegram API

## ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุทููุจุฉ / Required Environment Variables

ุฃุถู ูุฐู ุงููุชุบูุฑุงุช ุฅูู ููู `.env`:

```bash
# ููุงุฉ ุงูุณุฌูุงุช - ูุชุณุฌูู ุฃุญุฏุงุซ ุงูุจูุช ูุงูุฃุฎุทุงุก
LOG_CHANNEL_ID=-1001234567890

# ููุงุฉ ุงูููุฏูููุงุช - ูุญูุธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุงูููุฏูููุงุช
VIDEOS_CHANNEL_ID=-1009876543210

# ููุงุฉ ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ - ูุชุชุจุน ุงูุชุณุฌููุงุช ุงูุฌุฏูุฏุฉ
NEW_USERS_CHANNEL_ID=-1001111111111

# ููุงุฉ ุงูุฅุญุตุงุฆูุงุช - ููุชูุงุฑูุฑ ุงูููููุฉ
STATS_CHANNEL_ID=-1002222222222

# ููุงุฉ ุงูุฅุฏุงุฑุฉ - ููุฅุดุนุงุฑุงุช ุงูุชููุงุฆูุฉ (ุจุฏุก/ุฅููุงู)
ADMIN_CHANNEL_ID=-1003333333333

# ููุงุฉ ุงูุชุญุฏูุซุงุช - ููุฅุนูุงูุงุช ุงููุฏููุฉ ููุท
UPDATES_CHANNEL_USERNAME=@iraq_7kmmy
```

## ููููุฉ ุงูุญุตูู ุนูู ูุนุฑู ุงูููุงุฉ / How to Get Channel ID

### ุงูุทุฑููุฉ 1: ุจุงุณุชุฎุฏุงู ุงูุจูุช
1. ุฃุถู ุงูุจูุช [@userinfobot](https://t.me/userinfobot) ุฅูู ุงูููุงุฉ
2. ุณูุฑุณู ูู ูุนุฑู ุงูููุงุฉ

### ุงูุทุฑููุฉ 2: ุจุงุณุชุฎุฏุงู Telegram Web
1. ุงูุชุญ ุงูููุงุฉ ูู Telegram Web
2. ุงูุธุฑ ุฅูู ุงูุฑุงุจุท ูู ุงููุชุตูุญ
3. ุงููุนุฑู ุณูููู ูู ุงูุฑุงุจุท

### ุงูุทุฑููุฉ 3: ุจุงุณุชุฎุฏุงู GetUpdates API
1. ุฃุฑุณู ุฑุณุงูุฉ ูู ุงูููุงุฉ
2. ุงุณุชุฏุนู `https://api.telegram.org/bot<TOKEN>/getUpdates`
3. ุงุจุญุซ ุนู `chat.id` ูู ุงููุชูุฌุฉ

## ููููุฉ ุฅุนุฏุงุฏ ุงูููุงุฉ / How to Setup a Channel

1. **ุฅูุดุงุก ุงูููุงุฉ:**
   - ุงูุชุญ Telegram
   - ุงุถุบุท ุนูู "New Channel"
   - ุงุฎุชุฑ ุงุณู ููุตู ููููุงุฉ
   - ุงุฌุนููุง Private (ูุณุชุญุณู) ุฃู Public

2. **ุฅุถุงูุฉ ุงูุจูุช ูุฃุฏูู:**
   - ุงูุชุญ ุงูููุงุฉ
   - ุงุถุบุท ุนูู ุงุณู ุงูููุงุฉ
   - ุงุถุบุท ุนูู "Administrators"
   - ุงุถุบุท ุนูู "Add Administrator"
   - ุงุจุญุซ ุนู ุงูุจูุช ูุฃุถูู
   - ุงููุญ ุงูุจูุช ุตูุงุญูุฉ "Post Messages"

3. **ุงูุญุตูู ุนูู ูุนุฑู ุงูููุงุฉ:**
   - ุงุณุชุฎุฏู ุฅุญุฏู ุงูุทุฑู ุงููุฐููุฑุฉ ุฃุนูุงู

4. **ุฅุถุงูุฉ ุงููุนุฑู ุฅูู .env:**
   ```bash
   LOG_CHANNEL_ID=-1001234567890
   ```

5. **ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช:**
   ```bash
   # ุฅููุงู ุงูุจูุช
   # ุชุดุบูู ุงูุจูุช ูู ุฌุฏูุฏ
   python bot.py
   ```

## ูุญุต ุงูุณุฌูุงุช / Checking Logs

ููุจุญุซ ุนู ุฃุฎุทุงุก ุงููููุงุช ูู ุงูุณุฌูุงุช:

```bash
# ุนุฑุถ ุฌููุน ุฃุฎุทุงุก ุงููููุงุช
grep "CHANNEL ERROR" logs/bot.log

# ุนุฑุถ ุงุฎุชุจุงุฑุงุช ุงููููุงุช
grep "TESTING CHANNEL" logs/bot.log

# ุนุฑุถ ูุญุงููุงุช ุงูุฅุฑุณุงู
grep "ATTEMPTING TO SEND" logs/bot.log

# ุนุฑุถ ุฃุฎุทุงุก Telegram
grep "TELEGRAM ERROR" logs/bot.log
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก / Troubleshooting

### ุงููุดููุฉ: ูุง ูุชู ุฅุฑุณุงู ุฃู ุฑุณุงุฆู ูููููุงุช

**ุงูุฎุทูุงุช:**
1. ุชุญูู ูู ุฃู ุงููููุงุช ููุนุฏุฉ ูู `.env`
2. ุงูุญุต ุณุฌูุงุช ุงูุจูุช ุนูุฏ ุงูุจุฏุก
3. ุงุจุญุซ ุนู ุฑุณุงูุฉ "CHANNEL MANAGER CONFIGURATION"
4. ุชุญูู ูู ูุชุงุฆุฌ "TESTING CHANNEL CONNECTIVITY"
5. ุฅุฐุง ูุงูุช ุงููููุงุช ุบูุฑ ููุนุฏุฉุ ุฃุถููุง
6. ุฅุฐุง ูุงูุช ุงูุงุฎุชุจุงุฑุงุช ุชูุดูุ ุชุญูู ูู ุงูุฃุฐููุงุช

### ุงููุดููุฉ: ุจุนุถ ุงููููุงุช ุชุนูู ูุงูุจุนุถ ูุง

**ุงูุฎุทูุงุช:**
1. ุงูุญุต ุงูุณุฌูุงุช ูููููุงุช ุงูุชู ูุง ุชุนูู
2. ุงุจุญุซ ุนู ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุชูุตูููุฉ
3. ุงุชุจุน ุงูุญููู ุงูููุชุฑุญุฉ ูู ุฑุณุงุฆู ุงูุฎุทุฃ
4. ุชุญูู ูู ุฃู ุงูุจูุช ุฃุฏูู ูู ุชูู ุงููููุงุช
5. ุชุญูู ูู ุตูุงุญูุงุช ุงูุจูุช

### ุงููุดููุฉ: ุฑุณุงุฆู ุงูุฎุทุฃ ุบูุฑ ูุงุถุญุฉ

**ุงูุฎุทูุงุช:**
1. ุชุฃูุฏ ูู ุชุญุฏูุซ ุงูุจูุช ูุขุฎุฑ ุฅุตุฏุงุฑ
2. ุงุฑูุน ูุณุชูู Logging ุฅูู DEBUG:
   ```python
   logging.basicConfig(level=logging.DEBUG)
   ```
3. ุฃุนุฏ ุชุดุบูู ุงูุจูุช
4. ุงูุญุต ุงูุณุฌูุงุช ุงูุชูุตูููุฉ

## ุงูุฏุนู / Support

ุฅุฐุง ูุงุฌูุช ูุดุงูู:
1. ุงูุญุต ุงูุณุฌูุงุช ุฃููุงู
2. ุงุชุจุน ุงูุชุนูููุงุช ูู ุฑุณุงุฆู ุงูุฎุทุฃ
3. ุชุฃูุฏ ูู ุฅุนุฏุงุฏ ุงููููุงุช ุจุดูู ุตุญูุญ
4. ุชูุงุตู ูุน ุงููุทูุฑ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-01-16
**ุงูุฅุตุฏุงุฑ:** 1.0.0
